/* Safe Area Styles for Notched Devices */

/* CSS Custom Properties for Safe Areas */
:root {
  /* Modern safe area insets */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  
  /* Fallback for older iOS versions */
  --safe-area-inset-top-fallback: constant(safe-area-inset-top, 0px);
  --safe-area-inset-bottom-fallback: constant(safe-area-inset-bottom, 0px);
  --safe-area-inset-left-fallback: constant(safe-area-inset-left, 0px);
  --safe-area-inset-right-fallback: constant(safe-area-inset-right, 0px);
  
  /* Computed safe area values */
  --safe-area-top: max(var(--safe-area-inset-top), var(--safe-area-inset-top-fallback));
  --safe-area-bottom: max(var(--safe-area-inset-bottom), var(--safe-area-inset-bottom-fallback));
  --safe-area-left: max(var(--safe-area-inset-left), var(--safe-area-inset-left-fallback));
  --safe-area-right: max(var(--safe-area-inset-right), var(--safe-area-inset-right-fallback));
  
  /* Safe area combined with existing spacing */
  --header-height-safe: calc(var(--header-height, 80px) + var(--safe-area-top));
  --footer-height-safe: calc(var(--footer-height, 60px) + var(--safe-area-bottom));
}

/* Base safe area utility classes */
.safe-area-top {
  padding-top: var(--safe-area-top);
}

.safe-area-bottom {
  padding-bottom: var(--safe-area-bottom);
}

.safe-area-left {
  padding-left: var(--safe-area-left);
}

.safe-area-right {
  padding-right: var(--safe-area-right);
}

.safe-area-all {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

.safe-area-horizontal {
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

.safe-area-vertical {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
}

/* Margin variants */
.safe-margin-top {
  margin-top: var(--safe-area-top);
}

.safe-margin-bottom {
  margin-bottom: var(--safe-area-bottom);
}

.safe-margin-left {
  margin-left: var(--safe-area-left);
}

.safe-margin-right {
  margin-right: var(--safe-area-right);
}

/* Safe area view component */
.safe-area-view {
  width: 100%;
  height: 100%;
  position: relative;
}

.safe-area-view.full-height {
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height */
}

/* Navigation with safe area */
.navigation-safe {
  padding-top: calc(var(--space-4) + var(--safe-area-top));
  padding-left: calc(var(--space-4) + var(--safe-area-left));
  padding-right: calc(var(--space-4) + var(--safe-area-right));
}

/* Header with safe area */
.header-safe {
  height: var(--header-height-safe);
  padding-top: var(--safe-area-top);
}

/* Footer with safe area */
.footer-safe {
  padding-bottom: var(--safe-area-bottom);
  min-height: var(--footer-height-safe);
}

/* Fixed positioning with safe area */
.fixed-top-safe {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  padding-top: var(--safe-area-top);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
  z-index: var(--z-fixed);
}

.fixed-bottom-safe {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
  z-index: var(--z-fixed);
}

/* Modal with safe area */
.modal-safe {
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

/* Toast with safe area */
.toast-container-safe {
  top: calc(var(--space-4) + var(--safe-area-top));
  left: calc(var(--space-4) + var(--safe-area-left));
  right: calc(var(--space-4) + var(--safe-area-right));
}

/* Content area with safe area */
.content-safe {
  margin-top: var(--header-height-safe);
  margin-bottom: var(--footer-height-safe);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
}

/* Bottom navigation with safe area */
.bottom-nav-safe {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding-bottom: calc(var(--space-3) + var(--safe-area-bottom));
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
  background: var(--color-surface);
  border-top: 1px solid var(--color-border);
  z-index: var(--z-fixed);
}

/* Device-specific adjustments */
.has-safe-area {
  /* Styles for devices with safe areas */
}

.has-top-notch {
  /* Styles for devices with top notch/dynamic island */
}

.has-top-notch .status-bar {
  display: none; /* Hide custom status bar on notched devices */
}

.has-bottom-safe-area {
  /* Styles for devices with bottom safe area (home indicator) */
}

.has-bottom-safe-area .bottom-cta {
  margin-bottom: var(--safe-area-bottom);
}

/* Landscape orientation adjustments */
@media (orientation: landscape) {
  :root {
    /* Landscape safe areas are usually on the sides */
    --safe-area-horizontal: max(var(--safe-area-left), var(--safe-area-right));
  }
  
  .landscape-safe-horizontal {
    padding-left: var(--safe-area-horizontal);
    padding-right: var(--safe-area-horizontal);
  }
  
  /* Reduce top safe area in landscape */
  .content-safe {
    margin-top: calc(var(--header-height, 80px) + max(var(--safe-area-top), 20px));
  }
}

/* iPhone X and newer safe area handling */
@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(var(--safe-area-inset-top), var(--space-4));
  }
  
  .safe-area-bottom {
    padding-bottom: max(var(--safe-area-inset-bottom), var(--space-3));
  }
}

/* Fullscreen content that ignores safe area */
.fullscreen-ignore-safe {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  z-index: var(--z-modal);
}

/* Fullscreen content that respects safe area */
.fullscreen-with-safe {
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
  padding-top: var(--safe-area-top);
  padding-bottom: var(--safe-area-bottom);
  padding-left: var(--safe-area-left);
  padding-right: var(--safe-area-right);
  z-index: var(--z-modal);
}

/* Scrollable content with safe area */
.scrollable-safe {
  height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom));
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Input adjustments for safe area */
.input-safe {
  margin-bottom: calc(var(--space-3) + var(--safe-area-bottom));
}

/* Loading spinner with safe area */
.loading-safe {
  top: 50%;
  left: 50%;
  transform: translate(-50%, calc(-50% - var(--safe-area-top) / 2));
}

/* Debug helper to visualize safe areas */
.debug-safe-area {
  position: relative;
}

.debug-safe-area::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: var(--safe-area-top);
  background: rgba(255, 0, 0, 0.3);
  pointer-events: none;
  z-index: 9999;
}

.debug-safe-area::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--safe-area-bottom);
  background: rgba(0, 255, 0, 0.3);
  pointer-events: none;
  z-index: 9999;
}

/* Print styles - ignore safe areas */
@media print {
  .safe-area-top,
  .safe-area-bottom,
  .safe-area-left,
  .safe-area-right,
  .safe-area-all,
  .safe-area-horizontal,
  .safe-area-vertical {
    padding: 0 !important;
  }
  
  .safe-margin-top,
  .safe-margin-bottom,
  .safe-margin-left,
  .safe-margin-right {
    margin: 0 !important;
  }
}