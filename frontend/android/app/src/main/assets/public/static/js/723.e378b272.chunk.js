"use strict";(self.webpackChunkecommerce_frontend=self.webpackChunkecommerce_frontend||[]).push([[723],{6723:(e,s,d)=>{d.r(s),d.d(s,{default:()=>c});var i=d(5043),n=d(5016),l=(d(7648),d(579));const r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL,a=e=>{let{isOpen:s,onClose:d,children:i}=e;return s?(0,l.jsx)("div",{className:"modal-overlay",onClick:d,children:(0,l.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{className:"modal-close",onClick:d,children:"Ã—"}),i]})}):null},t=e=>{var s,d,n,r,t,c,o;let{order:u,onStatusUpdate:h,getStatusColor:p}=e;const[v,m]=(0,i.useState)(!1),[x,j]=(0,i.useState)(u.status);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"order-management-card",children:(0,l.jsxs)("div",{className:"order-header",children:[(0,l.jsxs)("div",{className:"order-basic-info",children:[(0,l.jsxs)("h3",{children:["Order #",u._id.slice(-8)]}),(0,l.jsxs)("p",{children:["Customer: ",(null===(s=u.user_info)||void 0===s?void 0:s.full_name)||"Unknown"," (",(null===(d=u.user_info)||void 0===d?void 0:d.email)||"Unknown",")"]}),(0,l.jsxs)("p",{children:["Total: $",u.total_amount.toFixed(2)]}),(0,l.jsxs)("p",{children:["Date: ",(g=u.created_at,new Date(g).toLocaleString())]})]}),(0,l.jsxs)("div",{className:"order-status-section",children:[(0,l.jsx)("span",{className:"current-status",style:{backgroundColor:p(u.status)},children:u.status.toUpperCase()}),(0,l.jsx)("button",{className:"details-toggle",onClick:()=>m(!0),children:"View Details"})]})]})}),(0,l.jsxs)(a,{isOpen:v,onClose:()=>m(!1),children:[(0,l.jsxs)("h2",{children:["Order #",u._id.slice(-8)]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{children:"ðŸ‘¤ Customer Info"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Name:"})," ",(null===(n=u.user_info)||void 0===n?void 0:n.full_name)||"Unknown"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Email:"})," ",(null===(r=u.user_info)||void 0===r?void 0:r.email)||"Unknown"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Username:"})," ",(null===(t=u.user_info)||void 0===t?void 0:t.username)||"Unknown"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Phone:"})," ",(null===(c=u.user_info)||void 0===c?void 0:c.phone)||"Not provided"]})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{children:"ðŸ“ Shipping Address"}),u.shipping_address?(0,l.jsxs)("p",{children:[u.shipping_address.street,(0,l.jsx)("br",{}),u.shipping_address.city,", ",u.shipping_address.state," ",u.shipping_address.zipCode,(0,l.jsx)("br",{}),u.shipping_address.country]}):(0,l.jsx)("p",{children:"No shipping address provided"})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{children:"ðŸ“¦ Items"}),(null===(o=u.items)||void 0===o?void 0:o.map(((e,s)=>{var d,i,n,r,a,t,c;return(0,l.jsxs)("div",{className:"order-item-detail",children:[(0,l.jsx)("img",{src:null===(d=e.product)||void 0===d?void 0:d.image_url,alt:null===(i=e.product)||void 0===i?void 0:i.name,className:"item-image"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:null===(n=e.product)||void 0===n?void 0:n.name})}),(0,l.jsxs)("p",{children:["Quantity: ",e.quantity]}),(0,l.jsxs)("p",{children:["Price: $",null===(r=e.product)||void 0===r||null===(a=r.price)||void 0===a?void 0:a.toFixed(2)," each"]}),(0,l.jsxs)("p",{children:["Subtotal: $",null===(t=(null===(c=e.product)||void 0===c?void 0:c.price)*e.quantity)||void 0===t?void 0:t.toFixed(2)]})]})]},s)})))||(0,l.jsx)("p",{children:"No items found"})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{children:"âš™ï¸ Update Status"}),(0,l.jsxs)("div",{className:"status-update-section",children:[(0,l.jsx)("select",{value:x,onChange:e=>j(e.target.value),style:{backgroundColor:p(x),color:"white",padding:"8px 12px",borderRadius:"5px",border:"none",marginRight:"1rem"},children:["pending","accepted","processing","shipped","delivered","cancelled"].map((e=>(0,l.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),(0,l.jsx)("button",{onClick:()=>{x!==u.status&&h(u._id,x),m(!1)},disabled:x===u.status,className:"btn btn-primary",children:"Update Status"})]})]})]})]});var g},c=()=>{const[e,s]=(0,i.useState)([]),[d,a]=(0,i.useState)(!0),[c,o]=(0,i.useState)(""),{makeAuthenticatedRequest:u}=(0,n.A)();(0,i.useEffect)((()=>{(async()=>{try{a(!0);const e=c?"".concat(r,"/admin/orders?status=").concat(c):"".concat(r,"/admin/orders"),d=await u(e);s(d.orders||[])}catch(e){s([])}finally{a(!1)}})()}),[c,u]);const h=async(e,s)=>{try{await u("".concat(r,"/admin/orders/").concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:s})}),alert("Order status updated to ".concat(s)),o(c+"")}catch(d){alert("Failed to update order status")}},p=e=>({pending:"#ffc107",accepted:"#17a2b8",processing:"#007bff",shipped:"#28a745",delivered:"#6c757d",cancelled:"#dc3545"}[e]||"#6c757d");return d?(0,l.jsx)("div",{className:"admin-orders",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("p",{className:"loading-message",children:"â³ Loading orders..."})})}):(0,l.jsx)("div",{className:"admin-orders",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"orders-header",children:[(0,l.jsx)("h1",{children:"Order Management"}),(0,l.jsxs)("div",{className:"filter-section",children:[(0,l.jsx)("h3",{children:"ðŸ” Filter Orders"}),(0,l.jsx)("div",{className:"filter-buttons",children:[{value:"",label:"All Orders"},{value:"pending",label:"Pending"},{value:"accepted",label:"Accepted"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}].map((e=>(0,l.jsx)("button",{onClick:()=>o(e.value),className:"filter-btn ".concat(c===e.value?"active":""),style:c===e.value&&e.value?{backgroundColor:p(e.value),color:"white"}:c===e.value?{backgroundColor:"#007bff",color:"white"}:{},children:e.label},e.value)))})]})]}),(0,l.jsxs)("div",{className:"orders-section",children:[(0,l.jsx)("div",{className:"orders-list",children:e.map((e=>(0,l.jsx)(t,{order:e,onStatusUpdate:h,getStatusColor:p},e._id)))}),0===e.length&&(0,l.jsx)("div",{className:"no-orders",children:(0,l.jsx)("p",{children:"ðŸ“¦ No orders found for the selected filters."})})]})]})})}}}]);
//# sourceMappingURL=723.e378b272.chunk.js.map