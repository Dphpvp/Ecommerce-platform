"use strict";(self.webpackChunkecommerce_frontend=self.webpackChunkecommerce_frontend||[]).push([[76],{3890:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(5043),n=a(2224),i=a(5016),c=a(8045),r=a(579);const l=e=>{let{isOpen:t,onClose:a,children:s}=e;return t?(0,r.jsx)("div",{className:"luxury-modal-overlay",onClick:a,children:(0,r.jsxs)("div",{className:"luxury-modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:a,className:"luxury-modal-close","aria-label":"Close modal",children:"✕"}),s]})}):null},o=e=>{let{product:t}=e;const[a,o]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),{addToCart:p}=(0,n._)(),{user:u}=(0,i.A)(),{showToast:m}=(0,c.Y6)(),b=()=>t.stock_quantity>10?"In Stock":t.stock_quantity>0?"".concat(t.stock_quantity," Left"):"Out of Stock";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"luxury-product-card-compact",onClick:()=>o(!0),children:[(0,r.jsxs)("div",{className:"product-image-container-compact",children:[(0,r.jsx)("img",{src:t.image_url,alt:t.name,loading:"lazy",onError:e=>{e.target.src="/images/placeholder-product.jpg"}}),(0,r.jsx)("div",{className:"product-overlay-compact",children:(0,r.jsx)("span",{children:"View Details"})})]}),(0,r.jsxs)("div",{className:"luxury-product-info-compact",children:[(0,r.jsx)("h3",{className:"product-name-compact",children:t.name}),(0,r.jsx)("p",{className:"product-category-compact",children:t.category}),(0,r.jsxs)("div",{className:"price-stock-compact",children:[(0,r.jsxs)("div",{className:"price-section-compact",children:[(0,r.jsx)("span",{className:"currency",children:"$"}),(0,r.jsx)("span",{className:"price-amount-compact",children:t.price})]}),(0,r.jsx)("div",{className:"stock-dot-compact ".concat(t.stock_quantity>10?"in-stock":t.stock_quantity>0?"low-stock":"out-of-stock"),title:b()})]})]})]}),(0,r.jsx)(l,{isOpen:a,onClose:()=>o(!1),children:(0,r.jsxs)("div",{className:"product-modal-content",children:[(0,r.jsx)("div",{className:"product-modal-image",children:(0,r.jsx)("img",{src:t.image_url,alt:t.name,onError:e=>{e.target.src="/images/placeholder-product.jpg"}})}),(0,r.jsxs)("div",{className:"product-modal-details",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h2",{className:"modal-product-name",children:t.name}),(0,r.jsx)("span",{className:"modal-category",children:t.category})]}),t.description&&(0,r.jsx)("p",{className:"modal-description",children:t.description}),(0,r.jsxs)("div",{className:"modal-specifications",children:[(0,r.jsxs)("div",{className:"spec-item",children:[(0,r.jsx)("span",{className:"spec-label",children:"Price"}),(0,r.jsxs)("span",{className:"spec-value",children:["$",t.price]})]}),(0,r.jsxs)("div",{className:"spec-item",children:[(0,r.jsx)("span",{className:"spec-label",children:"Category"}),(0,r.jsx)("span",{className:"spec-value",children:t.category})]}),(0,r.jsxs)("div",{className:"spec-item",children:[(0,r.jsx)("span",{className:"spec-label",children:"Availability"}),(0,r.jsx)("span",{className:"spec-value ".concat(t.stock_quantity>10?"text-green":t.stock_quantity>0?"text-yellow":"text-red"),children:b()})]}),t.material&&(0,r.jsxs)("div",{className:"spec-item",children:[(0,r.jsx)("span",{className:"spec-label",children:"Material"}),(0,r.jsx)("span",{className:"spec-value",children:t.material})]}),t.origin&&(0,r.jsxs)("div",{className:"spec-item",children:[(0,r.jsx)("span",{className:"spec-label",children:"Origin"}),(0,r.jsx)("span",{className:"spec-value",children:t.origin})]})]}),(0,r.jsxs)("div",{className:"modal-actions",children:[(0,r.jsx)("button",{className:"btn-modal-add-cart ".concat(t.stock_quantity<=0?"disabled":""),onClick:async e=>{if(e.stopPropagation(),u){h(!0);try{await p(t._id,1)?m("Added to cart successfully!","success"):m("Failed to add to cart","error")}catch(a){m("Failed to add to cart","error")}finally{h(!1)}}else m("Please login to add items to cart","error")},disabled:d||t.stock_quantity<=0,children:d?"Adding...":t.stock_quantity<=0?"Out of Stock":"Add to Cart"}),(0,r.jsx)("a",{href:"/contact",className:"btn-modal-contact",onClick:e=>e.stopPropagation(),children:"Contact Us"})]})]})]})})]})}},5170:(e,t,a)=>{a.d(t,{A:()=>n});a(2555);var s=a(7776);const n=new class{constructor(){this.isLoaded=!1,this.widgetId=null;try{this.isMobile=s.A.isMobile,this.platform=s.A.platform;const e=!!window.Capacitor,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a="ontouchstart"in window||navigator.maxTouchPoints>0;(e||t||a)&&(this.isMobile=!0,this.platform="mobile")}catch(e){this.isMobile=!0,this.platform="mobile"}this.onLoadCallback=null,this.onCompleteCallback=null,this.onExpiredCallback=null}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onLoad:t=null,onComplete:a=null,onExpired:s=null}=e;this.onLoadCallback=t,this.onCompleteCallback=a,this.onExpiredCallback=s;try{return this.isMobile=!0,await this.initializeMobileCaptcha(e)}catch(n){return this.isLoaded=!0,this.onLoadCallback&&this.onLoadCallback(),Promise.resolve(!0)}}async initializeWebCaptcha(e,t,a){return new Promise(((e,t)=>{if(window.grecaptcha)return this.isLoaded=!0,this.onLoadCallback&&this.onLoadCallback(),void e(!0);const a=document.createElement("script");a.src="https://www.google.com/recaptcha/api.js?onload=onMobileCaptchaLoad&render=explicit",a.async=!0,a.defer=!0,window.onMobileCaptchaLoad=()=>{this.isLoaded=!0,this.onLoadCallback&&this.onLoadCallback(),e(!0)},a.onerror=()=>{t(new Error("Failed to load reCAPTCHA"))},document.head.appendChild(a)}))}async initializeMobileCaptcha(e){try{return this.isLoaded=!0,this.onLoadCallback&&this.onLoadCallback(),Promise.resolve(!0)}catch(t){throw t}}render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isLoaded)throw new Error("Captcha not initialized");if(!e)throw new Error("Container element is required");try{return this.isMobile=!0,this.renderMobileCaptcha(e,t)}catch(a){e.innerHTML='\n        <div class="mobile-captcha">\n          <div class="captcha-question">\n            <label for="captcha-input-fallback">Security Check: Enter "1234"</label>\n            <input \n              type="text" \n              id="captcha-input-fallback" \n              placeholder="Enter 1234"\n            />\n          </div>\n        </div>\n      ';return e.querySelector("#captcha-input-fallback").addEventListener("input",(e=>{"1234"===e.target.value&&(t.callback&&t.callback("emergency-fallback-token"),this.onCompleteCallback&&this.onCompleteCallback("emergency-fallback-token"))})),"emergency-fallback"}}renderWebCaptcha(e,t){const{sitekey:a,theme:s="light",size:n="normal",callback:i,"expired-callback":c}=t;try{return this.widgetId=window.grecaptcha.render(e,{sitekey:a,theme:s,size:n,callback:e=>{i&&i(e),this.onCompleteCallback&&this.onCompleteCallback(e)},"expired-callback":()=>{c&&c(),this.onExpiredCallback&&this.onExpiredCallback()}}),this.widgetId}catch(r){throw r}}renderMobileCaptcha(e,t){const{callback:a}=t,s=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1,i=s+n,c=/Android/i.test(navigator.userAgent),r=c?"tel":"number",l=c?"android-input":"";e.innerHTML='\n      <div class="mobile-captcha '.concat(c?"android-captcha":"",'">\n        <div class="captcha-question">\n          <label for="captcha-input">Security Check: What is ').concat(s," + ").concat(n,'?</label>\n          <input \n            type="').concat(r,'" \n            id="captcha-input" \n            class="captcha-input ').concat(l,'" \n            placeholder="Enter answer"\n            min="0"\n            max="20"\n            inputmode="numeric"\n            pattern="[0-9]*"\n            autocomplete="off"\n            autocorrect="off"\n            autocapitalize="off"\n            spellcheck="false"\n          />\n        </div>\n        <div class="captcha-feedback"></div>\n      </div>\n    ');const o=e.querySelector("#captcha-input"),d=e.querySelector(".captcha-feedback");return c?this._setupAndroidInputHandling(o,d,i,s,n,a):this._setupStandardInputHandling(o,d,i,s,n,a),this.currentAnswer=i,this.widgetId="mobile-captcha-"+Date.now(),this.widgetId}_setupAndroidInputHandling(e,t,a,s,n,i){let c;e.addEventListener("focus",(()=>{const t=document.querySelector('meta[name="viewport"]');if(t){const e=t.content;t.content=e+", user-scalable=no",setTimeout((()=>{t.content=e}),100)}setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center"})}),300)})),e.addEventListener("input",(e=>{clearTimeout(c),c=setTimeout((()=>{this._validateInput(e,t,a,s,n,i)}),300)})),e.addEventListener("keydown",(c=>{"Enter"!==c.key&&13!==c.keyCode||(c.preventDefault(),e.blur(),this._validateInput({target:e},t,a,s,n,i))}))}_setupStandardInputHandling(e,t,a,s,n,i){e.addEventListener("input",(e=>{this._validateInput(e,t,a,s,n,i)}))}_validateInput(e,t,a,s,n,i){const c=parseInt(e.target.value);if(c===a){t.textContent="✓ Correct!",t.style.color="green",e.target.style.borderColor="green";const c=this.generateMobileToken(s,n,a);i&&i(c),this.onCompleteCallback&&this.onCompleteCallback(c)}else e.target.value&&c!==a?(t.textContent="✗ Incorrect, try again",t.style.color="red",e.target.style.borderColor="red"):(t.textContent="",e.target.style.borderColor="")}generateMobileToken(e,t,a){const s={num1:e,num2:t,answer:a,timestamp:Date.now(),platform:"mobile"};try{return btoa(JSON.stringify(s))}catch(n){return this._androidSafeEncode(s)}}_androidSafeEncode(e){const t=JSON.stringify(e);let a="";for(let s=0;s<t.length;s++){a+=t.charCodeAt(s).toString(16).padStart(2,"0")}return"android-"+a}getResponse(e){const t=document.querySelector("#captcha-input")||document.querySelector("#captcha-input-fallback");if(t){if("captcha-input-fallback"===t.id&&"1234"===t.value)return"emergency-fallback-token";if("captcha-input"===t.id&&parseInt(t.value)===this.currentAnswer)return this.generateMobileToken(0,0,this.currentAnswer)}return!this.isMobile&&window.grecaptcha&&null!==this.widgetId?window.grecaptcha.getResponse(this.widgetId):""}reset(e){if(this.isMobile){const e=document.querySelector(".mobile-captcha");if(e){const t=e.parentElement;this.renderMobileCaptcha(t,{})}}else window.grecaptcha&&null!==this.widgetId&&window.grecaptcha.reset(this.widgetId)}isCompleted(){const e=this.getResponse();return e&&e.length>0}getPlatformInfo(){return{isMobile:this.isMobile,platform:this.isMobile?"mobile":"web",userAgent:navigator.userAgent,capacitor:!!window.Capacitor}}}},5436:()=>{},6274:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(2555),n=a(3986),i=a(5043),c=a(4258),r=a(8045),l=a(579);const o=["onSubmit","children","validate","className","requireAuth"],d=e=>{let{onSubmit:t,children:a,validate:d=!0,className:h="",requireAuth:p=!1}=e,u=(0,n.A)(e,o);const[m,b]=(0,i.useState)(!1),[g,k]=(0,i.useState)({}),[y,f]=(0,i.useState)(null),[v,C]=(0,i.useState)(!0),{showToast:x}=(0,r.Y6)();(0,i.useEffect)((()=>{(async()=>{C(!0);try{const e=await c.iN.getToken();f(e)}catch(e){x("Security token failed to load. Please refresh the page.","error")}finally{C(!1)}})()}),[x]);return(0,l.jsxs)("form",(0,s.A)((0,s.A)({onSubmit:async e=>{if(e.preventDefault(),b(!0),k({}),!y)return x("Security token not available. Please refresh the page.","error"),void b(!1);const a=new FormData(e.target),s=Object.fromEntries(a.entries());if(d){const e={};if(Object.entries(s).forEach((t=>{let[a,s]=t;const n=((e,t)=>{const a={};if(e.includes("email")&&t&&(c.TT.email(t)||(a[e]="Please enter a valid email address")),e.includes("password")&&t){const s=c.TT.password(t);s.valid||(a[e]=s.message)}if(e.includes("username")&&t){const s=c.TT.username(t);s.valid||(a[e]=s.message)}if(e.includes("url")&&t){const s=c.TT.url(t);s.valid||(a[e]=s.message)}return e.includes("phone")&&t&&(c.TT.phone(t)||(a[e]="Please enter a valid phone number")),""===t&&"phone"!==e&&"address"!==e&&"send_confirmation"!==e&&(a[e]="This field is required"),(e.includes("message")||e.includes("description"))&&t&&(t.length<20&&(a[e]="Must be at least 20 characters long"),t.length>2e3&&(a[e]="Must be less than 2000 characters")),a})(a,s);Object.assign(e,n)})),Object.keys(e).length>0)return k(e),void b(!1)}const n={};Object.entries(s).forEach((e=>{let[t,a]=e;t.includes("email")?n[t]=c.o2.email(a):t.includes("url")?n[t]=c.o2.url(a):t.includes("phone")?n[t]=c.o2.phone(a):t.includes("message")||t.includes("description")?n[t]=c.o2.html(a):n[t]=c.o2.text(a)}));try{await t(n,y)}catch(i){i.message.includes("CSRF")?x("Security token expired. Please refresh the page.","error"):k({general:i.message||"Form submission failed. Please try again."})}finally{b(!1)}},className:h},u),{},{children:[g.general&&(0,l.jsx)("div",{className:"error-message",style:{marginBottom:"1rem",color:"#dc3545"},children:g.general}),i.Children.map(a,(e=>{if(i.isValidElement(e)){const t=e.props.name,a=g[t];return i.cloneElement(e,(0,s.A)((0,s.A)({className:"".concat(e.props.className||""," ").concat(a?"error":""),"aria-invalid":a?"true":"false","aria-describedby":a?"".concat(t,"-error"):void 0},a&&{style:(0,s.A)((0,s.A)({},e.props.style),{},{borderColor:"#dc3545"})}),"button"===e.type&&"submit"===e.props.type&&{disabled:m||!y}))}return e})),Object.entries(g).map((e=>{let[t,a]=e;return"general"!==t&&(0,l.jsx)("div",{id:"".concat(t,"-error"),className:"error-text",style:{color:"#dc3545",fontSize:"0.9rem",marginTop:"0.25rem"},children:a},t)}))]}))}},7648:()=>{}}]);
//# sourceMappingURL=common.5a09f69b.chunk.js.map