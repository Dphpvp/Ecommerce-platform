"use strict";(self.webpackChunkecommerce_frontend=self.webpackChunkecommerce_frontend||[]).push([[640],{5640:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var n=a(2555),l=a(5043),i=a(5016),t=(a(7648),a(579));const r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL,d=()=>{const[e,s]=(0,l.useState)([]),[a,d]=(0,l.useState)(!0),[c,o]=(0,l.useState)(null),[u,m]=(0,l.useState)({}),[h,x]=(0,l.useState)(""),[j,v]=(0,l.useState)("all"),{makeAuthenticatedRequest:p}=(0,i.A)(),_=(0,l.useCallback)((async()=>{try{const e=await p("".concat(r,"/admin/users"));s(e.users||[])}catch(e){}finally{d(!1)}}),[p]);(0,l.useEffect)((()=>{_()}),[_]);const N=()=>{o(null),m({})},g=e.filter((e=>{var s,a,n;const l=(null===(s=e.full_name)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase()))||(null===(n=e.username)||void 0===n?void 0:n.toLowerCase().includes(h.toLowerCase())),i="all"===j||"admin"===j&&e.is_admin||"user"===j&&!e.is_admin;return l&&i})),f=s=>"all"===s?e.length:e.filter((e=>"admin"===s?e.is_admin:!e.is_admin)).length;return a?(0,t.jsx)("div",{className:"admin-users",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("p",{children:"Loading users..."})})}):(0,t.jsx)("div",{className:"admin-users",children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{children:"User Management"}),(0,t.jsxs)("div",{className:"filter-section",children:[(0,t.jsx)("div",{className:"search-box",children:(0,t.jsx)("input",{type:"text",placeholder:"Search users by name, email, or username...",value:h,onChange:e=>x(e.target.value),className:"search-input"})}),(0,t.jsxs)("div",{className:"filter-buttons",children:[(0,t.jsxs)("button",{className:"filter-btn ".concat("all"===j?"active":""),onClick:()=>v("all"),children:["All Users (",f("all"),")"]}),(0,t.jsxs)("button",{className:"filter-btn ".concat("admin"===j?"active":""),onClick:()=>v("admin"),children:["Admins (",f("admin"),")"]}),(0,t.jsxs)("button",{className:"filter-btn ".concat("user"===j?"active":""),onClick:()=>v("user"),children:["Users (",f("user"),")"]})]})]}),(0,t.jsx)("div",{className:"users-section",children:0===g.length?(0,t.jsx)("div",{className:"no-users",children:(0,t.jsx)("p",{children:h?'No users found matching "'.concat(h,'".'):"No users found."})}):(0,t.jsx)("div",{className:"users-list",children:g.map((e=>(0,t.jsx)("div",{className:"user-card",children:c===e._id?(0,t.jsxs)("div",{className:"edit-form",children:[(0,t.jsx)("h3",{children:"Edit User"}),(0,t.jsxs)("div",{className:"form-grid",children:[(0,t.jsx)("input",{type:"text",value:u.full_name,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{full_name:e.target.value})),placeholder:"Full Name"}),(0,t.jsx)("input",{type:"email",value:u.email,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{email:e.target.value})),placeholder:"Email"}),(0,t.jsx)("input",{type:"text",value:u.username,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{username:e.target.value})),placeholder:"Username"}),(0,t.jsx)("input",{type:"tel",value:u.phone,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{phone:e.target.value})),placeholder:"Phone"}),(0,t.jsx)("textarea",{value:u.address,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{address:e.target.value})),placeholder:"Address",rows:"3"})]}),(0,t.jsxs)("div",{className:"edit-actions",children:[(0,t.jsx)("button",{className:"save-btn",onClick:()=>(async e=>{try{await p("".concat(r,"/admin/users/").concat(e),{method:"PUT",body:JSON.stringify(u)}),alert("User updated successfully"),_(),o(null),m({})}catch(s){alert(s.message||"Failed to update user")}})(e._id),children:"Save Changes"}),(0,t.jsx)("button",{className:"cancel-btn",onClick:N,children:"Cancel"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"user-info",children:[(0,t.jsxs)("div",{className:"user-header",children:[(0,t.jsx)("h3",{children:e.full_name}),(0,t.jsx)("span",{className:"role-badge ".concat(e.is_admin?"admin":"user"),children:e.is_admin?"Admin":"User"})]}),(0,t.jsxs)("div",{className:"user-details",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Username:"})," ",e.username]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Phone:"})," ",e.phone||"Not provided"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Address:"})," ",e.address||"Not provided"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Orders:"})," ",e.order_count||0]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Joined:"})," ",e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"]})]})]}),(0,t.jsxs)("div",{className:"user-actions",children:[(0,t.jsx)("button",{className:"edit-btn",onClick:()=>(e=>{o(e._id),m({full_name:e.full_name,email:e.email,username:e.username,phone:e.phone||"",address:e.address||""})})(e),children:"Edit"}),(0,t.jsx)("button",{className:"role-btn ".concat(e.is_admin?"remove-admin":"make-admin"),onClick:()=>(async(e,s)=>{try{await p("".concat(r,"/admin/users/").concat(e,"/admin"),{method:"PUT",body:JSON.stringify({is_admin:s})}),alert("User role updated to ".concat(s?"admin":"regular user")),_()}catch(a){alert(a.message||"Failed to update user role")}})(e._id,!e.is_admin),children:e.is_admin?"Remove Admin":"Make Admin"}),(0,t.jsx)("button",{className:"delete-btn",onClick:()=>(async(e,s)=>{if(window.confirm('Delete user "'.concat(s,'"? This action cannot be undone.')))try{await p("".concat(r,"/admin/users/").concat(e),{method:"DELETE"}),alert("User deleted successfully"),_()}catch(a){alert(a.message||"Failed to delete user")}})(e._id,e.full_name),children:"Delete"})]})]})},e._id)))})})]})})}}}]);
//# sourceMappingURL=640.f702f222.chunk.js.map